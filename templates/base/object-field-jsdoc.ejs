<%
const { field, utils } = it;
const { formatDescription, escapeJSDocContent, require, _ } = utils;

const comments = _.uniq(
    _.compact([
        field.title && formatDescription(field.title),
        field.description && formatDescription(field.description),
        field.deprecated && ` * @deprecated`,
        !_.isUndefined(field.format) && `@format ${escapeJSDocContent(field.format)}`,
        !_.isUndefined(field.minimum) && `@min ${escapeJSDocContent(field.minimum)}`,
        !_.isUndefined(field.maximum) && `@max ${escapeJSDocContent(field.maximum)}`,
        !_.isUndefined(field.pattern) && `@pattern ${escapeJSDocContent(field.pattern)}`,
        !_.isUndefined(field.example) &&
        `@example ${escapeJSDocContent(_.isObject(field.example) ? JSON.stringify(field.example) : field.example)}`,
    ]).reduce((acc, comment) => [...acc, ...comment.split(/\n/g)], []),
);
%>
<% if (comments.length === 1) { %>
  /** <%~ comments[0] %> */
<% } else if (comments.length) { %>
  /**
  <% comments.forEach(comment => { %>
   * <%~ comment %>

  <% }) %>
   */
<% } %>
